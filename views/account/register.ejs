<form class="account" action="/account/register" method="post">
    <h1><%- title %></h1>
    <%- messages() %>
    <% if (errors) { %>
        <ul class="notice">
            <% errors.array().forEach(error => { %>
                <li><%= error.msg %></li>
            <%  }) %>
        </ul>
    <% } %>
    <label for="account_firstname">
       First Name:
        <input type="text" name="account_firstname" id="account_firstname" placeholder="John" required value="<%= locals.account_firstname %>">
    </label>

    <label for="account_lastname">
       First Name:
        <input type="text" name="account_lastname" id="account_lastname" placeholder="Smith" required value="<%= locals.account_lastname %>">
    </label>

    <label for="account_email">
        Email Adress:
        <input type="email" name="account_email" id="account_email" placeholder="example@example.com" required value="<%= locals.account_email %>">
    </label>

    <label for="account_password">
        Password:
        <input type="password" name="account_password" id="account_password" pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$" required>
    </label>
    <div class="patterns hide">
        <ul>
            <li id="charPattern">At least 12 characters</li>
            <li id="numPattern">At least one number</li>
            <li id="lowPattern">One must be a lowercase letter</li>
            <li id="capPattern">One must be a capital letter</li>
            <li id="spePattern">One must be a special character</li>
        </ul>
    </div>
    <button class="account-btn"><%- title %></button>
    <p>Already have account?<a href="/account/login"> Login</a></p>
</form>
<script>
    const passInput = document.getElementById("account_password");
    const patterns = document.querySelector(".patterns");
    const charPattern = document.getElementById("charPattern");
    const numPattern = document.getElementById("numPattern");
    const lowPattern = document.getElementById("lowPattern");
    const capPattern = document.getElementById("capPattern");
    const spePattern = document.getElementById("spePattern");

    passInput.addEventListener("input", () => {
        if(passInput.value.length <= 0) {
            patterns.classList.add("hide")
        } else {
            patterns.classList.remove("hide");
        }
    });

    passInput.addEventListener("keyup", () => {
        charPattern.classList.toggle("validPattern", passInput.value.length >= 12);
        numPattern.classList.toggle("validPattern", /\d/.test(passInput.value)); //has a number?
        lowPattern.classList.toggle("validPattern", /[a-z]/.test(passInput.value)); //has a lowercase letter?
        capPattern.classList.toggle("validPattern", /[A-Z]/.test(passInput.value)); //has a capital letter?
        spePattern.classList.toggle("validPattern", /[^a-zA-Z0-9]/.test(passInput.value)); //has a special char?
    });

</script>
